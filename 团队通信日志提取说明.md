# 团队通信日志提取说明

## 使用方法

### 基本用法

```bash
./sync_team_comm_logs.sh <队伍A的IP> -- <队伍B的IP>
```

### 示例

假设你有两队机器人：
- 队伍A：1-5号机器人 (10.0.70.1 到 10.0.70.5)
- 队伍B：6-10号机器人 (10.0.70.6 到 10.0.70.10)

```bash
./sync_team_comm_logs.sh \
  10.0.70.1 10.0.70.2 10.0.70.3 10.0.70.4 10.0.70.5 \
  -- \
  10.0.70.6 10.0.70.7 10.0.70.8 10.0.70.9 10.0.70.10
```

或者只有部分机器人：

```bash
./sync_team_comm_logs.sh \
  10.0.70.1 10.0.70.2 10.0.70.5 \
  -- \
  10.0.70.6 10.0.70.11
```

## 生成的目录结构

```
Config/Real_Logs/
└── 20260127_143025/          # 时间戳目录
    ├── README.txt            # 说明文件
    ├── TeamA/                # 队伍A的日志
    │   ├── robot1_team_comm_p1.txt
    │   ├── robot2_team_comm_p2.txt
    │   ├── robot3_team_comm_p3.txt
    │   ├── robot4_team_comm_p4.txt
    │   └── robot5_team_comm_p5.txt
    └── TeamB/                # 队伍B的日志
        ├── robot6_team_comm_p1.txt
        ├── robot7_team_comm_p2.txt
        ├── robot8_team_comm_p3.txt
        ├── robot9_team_comm_p4.txt
        └── robot10_team_comm_p5.txt
```

## 时间戳格式

目录名格式：`YYYYMMDD_HHMMSS`

示例：
- `20260127_143025` = 2026年1月27日 14:30:25
- `20260127_160530` = 2026年1月27日 16:05:30

## 文件命名

格式：`robot<机器人编号>_team_comm_p<队内编号>.txt`

示例：
- `robot1_team_comm_p1.txt` - 1号机器人（队内1号）
- `robot6_team_comm_p1.txt` - 6号机器人（队内1号）

## 日志内容

每个 team_comm 文件包含：
- 团队通信目标
- 比赛时间
- 队伍编号
- 机器人数量
- 每次通信的详细信息：
  - 时间戳
  - 机器人编号
  - 位置坐标
  - 朝向角度
  - 可见度
  - 角色
  - 传球目标
  - 行走目标
  - 消息序列号

## 快速查看

```bash
# 查看最新的日志目录
ls -lt Config/Real_Logs/ | head -5

# 查看某次采集的所有文件
ls -lh Config/Real_Logs/20260127_143025/TeamA/
ls -lh Config/Real_Logs/20260127_143025/TeamB/

# 查看说明文件
cat Config/Real_Logs/20260127_143025/README.txt

# 查看某个机器人的通信日志
cat Config/Real_Logs/20260127_143025/TeamA/robot1_team_comm_p1.txt
```

## 注意事项

1. 确保你已经连接到机器人的局域网
2. 确保机器人已经运行过测试（生成了 team_comm 日志）
3. 脚本会自动跳过离线的机器人
4. 每次运行都会创建新的时间戳目录，不会覆盖旧日志
5. 使用 `--` 分隔两个队伍的IP列表

## 故障排查

### 机器人离线
```
✗ 机器人离线
```
检查：
- 机器人是否开机
- 网络连接是否正常
- IP地址是否正确

### 未找到日志文件
```
✗ 未找到日志文件
```
检查：
- 机器人是否运行过测试
- 日志路径是否正确 (/home/nao/logs/)
- SSH连接是否正常

### SSH连接失败
确保你可以手动SSH到机器人：
```bash
ssh nao@10.0.70.1
```
