# 机器人日志提取使用说明

## 快速开始

### 提取单个机器人的日志

```bash
./extract_robot_logs.sh 10.0.70.11
```

### 提取多个机器人的日志

```bash
./extract_robot_logs.sh 10.0.70.6 10.0.70.7 10.0.70.11
```

## 生成的目录结构

```
Config/Real_Logs/
└── 20260127_210530/          # 时间戳目录
    ├── README.txt            # 说明文件
    ├── robot_6/              # 6号机器人的日志
    │   ├── bhumand_*.log
    │   ├── fly11_fly11_*.log
    │   └── team_comm_*.txt   # 如果有的话
    ├── robot_7/              # 7号机器人的日志
    │   ├── bhumand_*.log
    │   ├── fly11_fly11_*.log
    │   └── team_comm_*.txt
    └── robot_11/             # 11号机器人的日志
        ├── bhumand_*.log
        ├── fly11_fly11_*.log
        └── team_comm_*.txt
```

## 功能特点

1. **自动时间戳** - 每次提取都会创建带时间戳的目录
2. **按机器人分组** - 每个机器人的日志保存在独立目录
3. **完整同步** - 同步所有 `.log` 和 `.txt` 文件
4. **保留结构** - 保留机器人上的子目录结构
5. **自动统计** - 显示文件数量和最新文件
6. **离线检测** - 自动跳过离线的机器人

## 输出示例

```
===========================================
机器人日志提取
===========================================
时间戳: 20260127_210530
保存目录: /home/lyl/test/MyBuman/Config/Real_Logs/20260127_210530
机器人列表: 10.0.70.11
===========================================

-------------------------------------------
处理机器人 #11 (10.0.70.11)
-------------------------------------------
✓ 机器人在线
正在同步日志文件...
✓ 同步完成
  - .log 文件: 89 个
  - .txt 文件: 0 个
  最新文件:
    bhumand_(44).log
    fly11_fly11_Default_Default__Testing_5_(15).log
    fly11_fly11_Default_Default__B-Human_1stHalf_3.log
    fly11_fly11_Default_Default__Testing_5_(14).log
    fly11_fly11_Default_Default__Testing_5_(13).log

===========================================
提取完成！
===========================================
日志保存在: /home/lyl/test/MyBuman/Config/Real_Logs/20260127_210530

查看日志:
  机器人 #11: ls -lh /home/lyl/test/MyBuman/Config/Real_Logs/20260127_210530/robot_11/

说明文件: /home/lyl/test/MyBuman/Config/Real_Logs/20260127_210530/README.txt
```

## 查看提取的日志

```bash
# 查看所有提取记录
ls -lt Config/Real_Logs/

# 查看最新一次提取
ls -lh Config/Real_Logs/$(ls -t Config/Real_Logs/ | head -1)/

# 查看某个机器人的日志
ls -lh Config/Real_Logs/20260127_210530/robot_11/

# 查看说明文件
cat Config/Real_Logs/20260127_210530/README.txt
```

## 常见问题

### 1. 机器人离线
```
✗ 机器人离线或无法连接
```
**解决**：检查机器人是否开机，网络是否连接

### 2. 同步失败
```
✗ 同步失败
```
**解决**：检查 SSH 连接是否正常，密码是否正确

### 3. 没有 .txt 文件
```
- .txt 文件: 0 个
```
**说明**：机器人还没有生成 team_comm 日志，需要：
1. 重新编译部署代码
2. 让机器人运行测试
3. 再次提取日志

## 与其他脚本的区别

| 脚本 | 用途 | 输出结构 |
|------|------|----------|
| `extract_robot_logs.sh` | 提取所有日志文件 | `robot_<编号>/` |
| `sync_team_comm_logs.sh` | 只提取 team_comm 日志 | `TeamA/`, `TeamB/` |
| `sync_robot_logs.sh` | 提取所有日志（旧版） | `robot_<编号>/` |

**推荐使用 `extract_robot_logs.sh`** - 功能最全面，输出最清晰。
